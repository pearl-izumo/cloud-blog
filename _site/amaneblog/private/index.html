<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éå…¬é–‹è¨˜äº‹ä¸€è¦§</title>
    <link rel="stylesheet" href="/assets/style.css">
</head>
<body>

    <header>
        <div class="header-content">
            <a class="logo-link">
                <img src="/assets/cloudblog_logo.png" alt="CLOUDBLOGãƒ­ã‚´" class="header-logo">
            </a>
        </div>
    </header>

    <div class="main-container">
        <h2>
    <a href="/amaneblog/" style="color: var(--color-meta)">é›¨ã®ä¸­ã®ã²ã¨ã‚Šã”ã¨</a>
  </h2>

<div id="posts-list-container">
    
    <div class="posts-list">
    <h1>éå…¬é–‹è¨˜äº‹ä¸€è¦§</h1>
    
    
    
    
    

    
     

    <ul>
        
            
            
            

            
            
                
            
            
            

            
            

            
            
            

            
            <li>
                <small>2025-10-25</small>
                <a href="/amaneblog/private/2025/10/25/trigger-test">
                    ã“ã®è¨˜äº‹ã‚’èª­ã‚“ã§ã„ã‚‹ã‚ãªãŸã¸
                </a>
            </li>
            
            
        
            
            
            

            
            

            
            
            

            
            
        
            
            
            

            
            

            
            
            

            
            
        
            
            
            

            
            

            
            
            

            
            
        
            
            
            

            
            

            
            
            

            
            
        
            
            
            

            
            

            
            
            

            
            
        
            
            
            

            
            

            
            
            

            
            <li>
                <small>2025-07-11</small>
                <a href="/amaneblog/private/2025/07/11/post1">
                    æ—¥è¨˜-9
                </a>
            </li>
            
            
        
            
            
            

            
            

            
            
            

            
            <li>
                <small>2024-08-24</small>
                <a href="/amaneblog/private/2024/08/24/post1">
                    æ—¥è¨˜-8
                </a>
            </li>
            
            
        
            
            
            

            
            

            
            
            

            
            
        
            
            
            

            
            

            
            
            

            
            
        
            
            
            

            
            

            
            
            

            
            <li>
                <small>2023-07-29</small>
                <a href="/amaneblog/private/2023/07/29/post1">
                    æ—¥è¨˜-7
                </a>
            </li>
            
            
        
            
            
            

            
            

            
            
            

            
            
        
            
            
            

            
            

            
            
            

            
            <li>
                <small>2023-01-20</small>
                <a href="/amaneblog/private/2023/01/20/post1">
                    æ—¥è¨˜-6
                </a>
            </li>
            
            
        
            
            
            

            
            

            
            
            

            
            <li>
                <small>2022-04-25</small>
                <a href="/amaneblog/private/2022/04/25/post1">
                    æ—¥è¨˜-5
                </a>
            </li>
            
            
        
            
            
            

            
            

            
            
            

            
            
        
            
            
            

            
            

            
            
            

            
            <li>
                <small>2021-06-14</small>
                <a href="/amaneblog/private/2021/06/14/post1">
                    æ—¥è¨˜-4
                </a>
            </li>
            
            
        
            
            
            

            
            

            
            
            

            
            
        
            
            
            

            
            

            
            
            

            
            <li>
                <small>2020-10-26</small>
                <a href="/amaneblog/private/2020/10/26/post1">
                    æ—¥è¨˜-3
                </a>
            </li>
            
            
        
            
            
            

            
            

            
            
            

            
            
        
            
            
            

            
            

            
            
            

            
            <li>
                <small>2020-01-31</small>
                <a href="/amaneblog/private/2020/01/31/post1">
                    æ—¥è¨˜-2
                </a>
            </li>
            
            
        
            
            
            

            
            

            
            
            

            
            
        
            
            
            

            
            

            
            
            

            
            <li>
                <small>2019-09-23</small>
                <a href="/amaneblog/private/2019/09/23/post1">
                    æ—¥è¨˜
                </a>
            </li>
            
            
        
            
            
            

            
            

            
            
            

            
            
        
    </ul>
    
</div>



</div>

<script>
    const CURRENT_BLOG_ID = "amaneblog";
    const CURRENT_LIST_TYPE = "private";
    const TRIGGER_POST_SLUG = "trigger-test";

    // ğŸ”‘ ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚­ãƒ¼ã®å®šç¾©
    const LIST_FLAG_KEY = `trigger_state_${CURRENT_BLOG_ID}_${TRIGGER_POST_SLUG}`; 
    const LIST_CURRENT_STATE = localStorage.getItem(LIST_FLAG_KEY);
    const LIST_BASE_URL = ""; 
    
    // ğŸ”‘ éš ã—è¨˜äº‹ã®æƒ…å ±ã‚’å®šç¾© (Liquidå¤‰æ•°ã¨ã¯ç•°ãªã‚‹JSå¤‰æ•°ã¨ã—ã¦å®šç¾©)
    const HIDDEN_POST_SLUG = "system-response-log";
    const HIDDEN_POST_URL = LIST_BASE_URL + '/amaneblog/private/latest-post/'
    const HIDDEN_POST_TITLE = "ã‚³ãƒ¡ãƒ³ãƒˆã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™";

    // è¡¨ç¤ºç”¨ã®æ—¥ä»˜ã‚’å‹•çš„ã«è¨­å®š
    const QUOTE_DATE_KEY = `trigger_date_${CURRENT_BLOG_ID}_${TRIGGER_POST_SLUG}`;
    const HIDDEN_POST_DATE = localStorage.getItem(QUOTE_DATE_KEY) || '---';
    //const HIDDEN_POST_DATE = "2025-10-13";
    console.log(HIDDEN_POST_DATE)

    function checkAndDisplayHiddenPost() {
        // ğŸ”‘ ä¿®æ­£ã®æ ¸: çŠ¶æ…‹ãŒ COMPLETED ã®å ´åˆã®ã¿ã€å‡¦ç†ã‚’å®Ÿè¡Œ
        if (LIST_CURRENT_STATE === 'COMPLETED') { 
            
            // æ—¢å­˜ã®ãƒªã‚¹ãƒˆï¼ˆ<ul>ï¼‰è¦ç´ ã‚’è¦‹ã¤ã‘ã‚‹
            // LiquidãŒç”Ÿæˆã—ãŸãƒªã‚¹ãƒˆã®è¦ªè¦ç´ ï¼ˆ.posts-listï¼‰å†…ã® <ul> ã‚¿ã‚°ã‚’æ¢ã™
            let targetList = document.querySelector('.posts-list ul');
            
            if (!targetList) {
                // æŒ¿å…¥å¯¾è±¡ã®ãƒªã‚¹ãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã‘ã‚Œã°å‡¦ç†ã‚’çµ‚äº†
                console.error("Target list (<ul>) not found for dynamic insertion.");
                return;
            }

            // ğŸ”‘ æŒ¿å…¥ã™ã‚‹HTMLã‚’ã“ã®ãƒ–ãƒ­ãƒƒã‚¯å†…ã§ç”Ÿæˆ
            const hiddenPostHtml = `
                <li class="hidden-post-item">
                    <small style="color: var(--color-meta);">${HIDDEN_POST_DATE}</small>
                    <a href="${HIDDEN_POST_URL}">
                        ${HIDDEN_POST_TITLE}
                        <span class="arg-marker">NEW</span>
                    </a>
                </li>
            `;
            
            // æ—¢å­˜ãƒªã‚¹ãƒˆã®å…ˆé ­ã«æŒ¿å…¥
            targetList.insertAdjacentHTML('afterbegin', hiddenPostHtml);
        }
        // COMPLETED ã§ãªã‘ã‚Œã°ã€ä½•ã‚‚è¡¨ç¤ºã—ãªã„ï¼ˆLiquidã«ã‚ˆã£ã¦å…ƒã€…éš ã•ã‚Œã¦ã„ã‚‹ãŸã‚ï¼‰
    }

    // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«å®Ÿè¡Œ
    document.addEventListener('DOMContentLoaded', checkAndDisplayHiddenPost);
</script>
    </div>

    <footer>
        <p class="footer-note">
            ã“ã®Webã‚µã‚¤ãƒˆã®å†…å®¹ã¯ãƒ•ã‚£ã‚¯ã‚·ãƒ§ãƒ³ã§ã‚ã‚Šã€<br>
            å®Ÿåœ¨ã®äººç‰©ãƒ»å›£ä½“ã¨ã¯ä¸€åˆ‡é–¢ä¿‚ã‚ã‚Šã¾ã›ã‚“ã€‚
        </p>
        <p class="footer-copyright">&copy; 2025 å‡ºé›²ï¼ˆ@pearl_izumoï¼‰</p>
    </footer>

    <script>
        // ğŸ”‘ ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°å®šç¾©: Liquidå¤‰æ•°ã®å®‰å…¨ãªå‚ç…§
        const BASE_URL = ""; 
        const CURRENT_BLOG_PATH = "amaneblog"; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚‚è¨­å®š
        //window.CURRENT_BLOG_PATH = "amaneblog";
        const PRIVATE_PATH = BASE_URL + "/" + CURRENT_BLOG_PATH + "/private/";
        console.log(PRIVATE_PATH);
        const AUTH_FLAG_KEY = `isAuthenticated_${CURRENT_BLOG_PATH}`;

        const AUTH_SETTINGS = {
            'amaneblog': {
                // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æƒ…å ±
                password1: "MTk5NzAzMjQ=",
                password2: "ZmVlbHNwZWNpYWw=",
                // è³ªå•æƒ…å ±
                question1: 'ãƒ»ç§ã®æ¨ã—ã®èª•ç”Ÿæ—¥ã¯ï¼Ÿ',
                placeholder1: 'è¥¿æš¦ã‚ã‚Š8æ¡',
                inputType1: 'text',
                question2: 'ãƒ»ç§ã®æ€ã„å‡ºã®æ›²ã¯ï¼Ÿ',
                placeholder2: 'è‹±èªå°æ–‡å­—',
                inputType2: 'text',
            },
            'hokanoblog': {
                // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æƒ…å ±
                password1: "1st",
                password2: "2nd",
                // è³ªå•æƒ…å ±
                question1: 'ãƒ»ç§ã®èª•ç”Ÿæ—¥ã¯ï¼Ÿ',
                placeholder1: 'æ¼¢å­—3æ–‡å­—',
                inputType1: 'number',
                question2: 'ãƒ»ç§˜å¯†ã®åˆè¨€è‘‰ã¯ï¼Ÿ',
                placeholder2: 'å…¨ã¦å¤§æ–‡å­—',
                inputType2: 'text', 
            },
            'default': {
                // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæƒ…å ± (ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¨è³ªå•)
                password1: "DEFAULT_1",
                password2: "DEFAULT_2",
                question1: 'ãƒ»èªè¨¼ã‚³ãƒ¼ãƒ‰ 1/2',
                placeholder1: 'ã‚³ãƒ¼ãƒ‰1ã‚’å…¥åŠ›',
                inputType1: 'text',
                question2: 'ãƒ»èªè¨¼ã‚³ãƒ¼ãƒ‰ 2/2',
                placeholder2: 'ã‚³ãƒ¼ãƒ‰2ã‚’å…¥åŠ›',
                inputType2: 'text',
            }
        };

        // 1. èªè¨¼ã«å¿…è¦ãªè¨­å®šã‚’ç¾åœ¨ã®ãƒ–ãƒ­ã‚°ãƒ‘ã‚¹ã‹ã‚‰å–å¾—
        const currentSettings = AUTH_SETTINGS[CURRENT_BLOG_PATH] || AUTH_SETTINGS.default;

        // 2. èªè¨¼ãƒ­ã‚¸ãƒƒã‚¯ã§ä½¿ç”¨ã™ã‚‹ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«ä»£å…¥
        const CORRECT_PASSWORD_1 = currentSettings.password1; 
        const CORRECT_PASSWORD_2 = currentSettings.password2;

        // 1. ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼IDã®ç”Ÿæˆã¨æ°¸ç¶šåŒ– (ã‚³ãƒ¡ãƒ³ãƒˆãƒˆãƒªã‚¬ãƒ¼ç”¨)
        function getPlayerId() {
            let playerId = localStorage.getItem('arg_player_id');
            if (!playerId) {
                playerId = 'player-' + Math.random().toString(36).substring(2, 9);
                localStorage.setItem('arg_player_id', playerId);
            }
            return playerId;
        }

        getPlayerId(); 

        // é›£èª­åŒ–
        function decodeBase64(encodedString) {
            // JavaScriptæ¨™æº–ã®atobé–¢æ•°ã‚’ä½¿ç”¨
            return atob(encodedString); 
        }


        // 2. æ±ç”¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼ãƒ­ã‚¸ãƒƒã‚¯ (2æ®µéšèªè¨¼)
        function authenticate() {
            document.body.classList.add('is-locked');
            // ãƒ•ã‚©ãƒ¼ãƒ ã®HTMLã‚’å®šç¾©
            const formHtml = `
                <div id="auth-overlay" style="display: flex;">
                    <div id="auth-container">
                        <h2>éå…¬é–‹ã‚¨ãƒªã‚¢</h2>
                        
                        <form id="password-form" onsubmit="handleAuthSubmit(event)">
                            <p>${currentSettings.question1}</p>
                            <input type="${currentSettings.inputType1}" id="auth-input-1" placeholder="--${currentSettings.placeholder1}" required>
                            <br>
                            <p>${currentSettings.question2}</p>
                            <input type="${currentSettings.inputType2}" id="auth-input-2" placeholder="--${currentSettings.placeholder2}" required>
                            
                            <button type="submit" id="auth-submit-button">ãƒ­ã‚°ã‚¤ãƒ³</button>
                        </form>
                        
                        <p id="auth-message" style="display: none;">å›ç­”ãŒé–“é•ã£ã¦ã„ã¾ã™ã€‚</p>
                        
                        <p style="margin-top: 20px; text-align: center;"><a href="${BASE_URL}/${CURRENT_BLOG_PATH}" style="color: var(--color-link);"> << ãƒ–ãƒ­ã‚°TOP</a></p>
                    </div>
                </div>
            `;

            // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ body ã®å…ˆé ­ã«æŒ¿å…¥ (afterbegin)
            const headerElement = document.querySelector('header');
            if (headerElement) {
                headerElement.insertAdjacentHTML('afterend', formHtml);
            } else {
                // header ãŒè¦‹ã¤ã‹ã‚‰ãªã‘ã‚Œã° body ã®å…ˆé ­ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
                document.body.insertAdjacentHTML('afterbegin', formHtml);
            }
            
            // ã‚¨ãƒ©ãƒ¼ã‚’å›é¿ã™ã‚‹ãŸã‚ã€è¦ç´ ãŒå­˜åœ¨ã™ã‚‹å ´åˆã«ã®ã¿ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’è©¦ã¿ã¾ã™
            const input1 = document.getElementById('auth-input-1');
            if (input1) {
                input1.focus(); 
            }
        }

        // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ã®å‡¦ç†
        function handleAuthSubmit(event) {
            event.preventDefault(); 
            
            const input1 = document.getElementById('auth-input-1').value.trim();
            const input2 = document.getElementById('auth-input-2').value.trim();
            const errorMessage = document.getElementById('auth-message');

            const decodedPassword1 = decodeBase64(CORRECT_PASSWORD_1);
            const decodedPassword2 = decodeBase64(CORRECT_PASSWORD_2);

            if (input1 === decodedPassword1 && input2 === decodedPassword2) {
                // èªè¨¼æˆåŠŸ
                document.body.classList.remove('is-locked');
                localStorage.setItem(AUTH_FLAG_KEY, 'true');
                const overlay = document.getElementById('auth-overlay');
                if (overlay) { overlay.remove(); }
                
                
                window.location.href = window.location.href; 
            } else {
                // èªè¨¼å¤±æ•—
                errorMessage.style.display = 'block';
                document.getElementById('auth-input-1').value = ''; 
                document.getElementById('auth-input-2').value = ''; 
                document.getElementById('auth-input-1').focus();
            }
        }

        // 3. ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®å®Ÿè¡Œ
        function checkPrivateAccess() {
            const currentPath = window.location.pathname;
            
            // ğŸ”‘ ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•° PRIVATE_PATH ã‚’ä½¿ç”¨
            const isAuthenticated = localStorage.getItem(AUTH_FLAG_KEY) === 'true';
            const isPrivateArea = currentPath.startsWith(PRIVATE_PATH); 


            // éå…¬é–‹ã‚¨ãƒªã‚¢ã‹ã¤æœªèªè¨¼ã®å ´åˆ
            if (isPrivateArea && !isAuthenticated) {
                
                authenticate(); // ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¡¨ç¤º
                const mainContent = document.querySelector('.main-container');
                
            } else {
                // èªè¨¼æ¸ˆã¿ã¾ãŸã¯å…¬é–‹ã‚¨ãƒªã‚¢ã®å ´åˆ
                document.body.style.display = 'block'; 
            }
        }

        // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«å®Ÿè¡Œ
        checkPrivateAccess();

    </script>

</body>
</html>