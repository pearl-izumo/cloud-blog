<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…¬é–‹ãƒ†ã‚¹ãƒˆè¨˜äº‹ - ã¯ã˜ã‚ã¾ã—ã¦</title>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 0; }
        .container { max-width: 800px; margin: 20px auto; padding: 0 20px; }
        header { background: #f4f4f4; padding: 10px 0; text-align: center; }
        nav a { margin: 0 10px; text-decoration: none; color: #333; }
        footer { text-align: center; padding: 10px 0; border-top: 1px solid #ccc; margin-top: 50px; }
        .post-content { border-left: 3px solid #ccc; padding-left: 15px; margin-top: 20px; }
    </style>
</head>
<body>

    <header>
        <h1><a href="/amaneblog/">ã‚¢ãƒãƒã®è¨˜éŒ²</a></h1>
        <nav>
            <a href="/amaneblog/">å…¥å£</a>
            <a href="/amaneblog/public/">å…¬é–‹è¨˜äº‹</a>
            <a href="/amaneblog/private/">éå…¬é–‹ã‚¨ãƒªã‚¢</a>
        </nav>
    </header>

    <div class="container">
        <p>ã“ã‚Œã¯ã‚¢ãƒãƒã®å…¬é–‹è¨˜äº‹ã®ãƒ†ã‚¹ãƒˆã§ã™ã€‚</p>

<p>ã“ã®è¨˜äº‹ã¯ã€/amaneblog/public/hello-world.html ã¨ã„ã†ãƒ‘ã‚¹ã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚</p>

    </div>

    <footer>
        <p>&copy; 2025 ã‚¢ãƒãƒã®è¨˜éŒ²</p>
    </footer>

    <script>
        // ğŸ”‘ ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°å®šç¾©: Liquidå¤‰æ•°ã®å®‰å…¨ãªå‚ç…§
        const BASE_URL = "/amaneblog"; 
        const PRIVATE_PATH = BASE_URL + "/private/";
        
        // 2æ®µéšãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å–å¾— (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§å®‰å…¨åŒ–)
        const CORRECT_PASSWORD_1 = "AMANE-SECRET-KEY";
        const CORRECT_PASSWORD_2 = "CLOUD-HIDDEN-WORD"; 


        // 1. ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼IDã®ç”Ÿæˆã¨æ°¸ç¶šåŒ– (ã‚³ãƒ¡ãƒ³ãƒˆãƒˆãƒªã‚¬ãƒ¼ç”¨)
        function getPlayerId() {
            let playerId = localStorage.getItem('arg_player_id');
            if (!playerId) {
                playerId = 'player-' + Math.random().toString(36).substring(2, 9);
                localStorage.setItem('arg_player_id', playerId);
            }
            return playerId;
        }

        getPlayerId(); 


        // 2. æ±ç”¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼ãƒ­ã‚¸ãƒƒã‚¯ (2æ®µéšèªè¨¼)
        function authenticate() {
            // ãƒ•ã‚©ãƒ¼ãƒ ã®HTMLã‚’å®šç¾©
            const formHtml = `
                <div id="auth-overlay" style="
                    position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                    background: rgba(0, 0, 0, 0.9); z-index: 10000; 
                    display: flex; 
                    justify-content: center; align-items: center; 
                    flex-direction: column; color: white;
                ">
                    <h2>ã€äºŒé‡èªè¨¼ãŒå¿…è¦ã§ã™ã€‘</h2>
                    <p>éå…¬é–‹ã‚¨ãƒªã‚¢ã¸å…¥ã‚‹ãŸã‚ã® **åˆè¨€è‘‰** ã¨ **ç§˜å¯†ã®æ•°å­—** ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>
                    <form id="password-form" onsubmit="handleAuthSubmit(event)">
                        <input type="text" id="auth-input-1" placeholder="åˆè¨€è‘‰ (ä¾‹: AMANE-SECRET-KEY)" style="padding: 8px; margin: 5px; width: 250px;">
                        <input type="text" id="auth-input-2" placeholder="ç§˜å¯†ã®æ•°å­— (ä¾‹: CLOUD-HIDDEN-WORD)" style="padding: 8px; margin: 5px; width: 250px;">
                        <button type="submit" style="padding: 8px 15px; margin-top: 10px;">èªè¨¼ã‚’è©¦ã¿ã‚‹</button>
                    </form>
                    <p style="margin-top: 20px;"><a href="${BASE_URL}/" style="color: #ccc;">[ ãƒ–ãƒ­ã‚°å…¥å£ã«æˆ»ã‚‹ ]</a></p>
                    <p id="error-message" style="color: red; margin-top: 10px; display: none;">åˆè¨€è‘‰ã¾ãŸã¯ç§˜å¯†ã®æ•°å­—ãŒé•ã„ã¾ã™ã€‚</p>
                </div>
            `;

            // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ body ã®å…ˆé ­ã«æŒ¿å…¥ (afterbegin)
            document.body.insertAdjacentHTML('afterbegin', formHtml);
            
            // ã‚¨ãƒ©ãƒ¼ã‚’å›é¿ã™ã‚‹ãŸã‚ã€è¦ç´ ãŒå­˜åœ¨ã™ã‚‹å ´åˆã«ã®ã¿ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’è©¦ã¿ã¾ã™
            const input1 = document.getElementById('auth-input-1');
            if (input1) {
                 input1.focus(); 
            }
        }

        // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ã®å‡¦ç†
        function handleAuthSubmit(event) {
            event.preventDefault(); 
            
            const input1 = document.getElementById('auth-input-1').value.trim();
            const input2 = document.getElementById('auth-input-2').value.trim();
            const errorMessage = document.getElementById('error-message');

            if (input1 === CORRECT_PASSWORD_1 && input2 === CORRECT_PASSWORD_2) {
                // èªè¨¼æˆåŠŸ
                localStorage.setItem('isAuthenticated', 'true');
                const overlay = document.getElementById('auth-overlay');
                if (overlay) { overlay.remove(); }
                
                window.location.href = window.location.href; 
            } else {
                // èªè¨¼å¤±æ•—
                errorMessage.style.display = 'block';
                document.getElementById('auth-input-1').value = ''; 
                document.getElementById('auth-input-2').value = ''; 
                document.getElementById('auth-input-1').focus();
            }
        }

        // 3. ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®å®Ÿè¡Œ
        function checkPrivateAccess() {
            const currentPath = window.location.pathname;
            
            // ğŸ”‘ ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•° PRIVATE_PATH ã‚’ä½¿ç”¨
            const isPrivateArea = currentPath.startsWith(PRIVATE_PATH); 
            const isAuthenticated = localStorage.getItem('isAuthenticated') === 'true';

            // éå…¬é–‹ã‚¨ãƒªã‚¢ã‹ã¤æœªèªè¨¼ã®å ´åˆ
            if (isPrivateArea && !isAuthenticated) {
                
                authenticate(); // ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¡¨ç¤º

                // ä¿®æ­£æ¸ˆã¿: bodyã®æ§‹æˆè¦ç´ ã‚’å€‹åˆ¥ã«éè¡¨ç¤ºã«ã™ã‚‹
                document.body.style.display = 'block'; 
                
                const elementsToHide = ['header', '.container', 'footer'];
                elementsToHide.forEach(selector => {
                    const element = document.querySelector(selector);
                    if (element) {
                        element.style.display = 'none';
                    }
                });
                
            } else {
                // èªè¨¼æ¸ˆã¿ã¾ãŸã¯å…¬é–‹ã‚¨ãƒªã‚¢ã®å ´åˆ
                document.body.style.display = 'block'; 
            }
        }

        // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«å®Ÿè¡Œ
        checkPrivateAccess();

    </script>

</body>
</html>