<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éå…¬é–‹è¨˜äº‹ä¸€è¦§ (è¦èªè¨¼)</title>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 0; }
        .container { max-width: 800px; margin: 20px auto; padding: 0 20px; }
        header { background: #f4f4f4; padding: 10px 0; text-align: center; }
        nav a { margin: 0 10px; text-decoration: none; color: #333; }
        footer { text-align: center; padding: 10px 0; border-top: 1px solid #ccc; margin-top: 50px; }
        .post-content { border-left: 3px solid #ccc; padding-left: 15px; margin-top: 20px; }
    </style>
</head>
<body>

    <header>
        <h1><a href="/amaneblog/">ã‚¢ãƒãƒã®è¨˜éŒ²</a></h1>
        <nav>
            <a href="/amaneblog/">å…¥å£</a>
            <a href="/amaneblog/public/">å…¬é–‹è¨˜äº‹</a>
            <a href="/amaneblog/private/">éå…¬é–‹ã‚¨ãƒªã‚¢</a>
        </nav>
    </header>

    <div class="container">
        <h2>ã€éå…¬é–‹ã‚¨ãƒªã‚¢ã€‘ã‚¢ã‚¯ã‚»ã‚¹èªè¨¼æ¸ˆã¿</h2>

<p>èªè¨¼ã•ã‚ŒãŸãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã¿ãŒé–²è¦§ã§ãã‚‹è¨˜éŒ²ã®ãƒªã‚¹ãƒˆã§ã™ã€‚ã“ã“ã«ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã£ã¦éš ã•ã‚Œã¦ã„ã‚‹æ©Ÿå¯†æ€§ã®é«˜ã„ãƒ­ã‚°ãŒå«ã¾ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</p>

<div id="posts-list-container">
    
    <div class="posts-list">
    <h1>éå…¬é–‹è¨˜äº‹ä¸€è¦§ (è¦èªè¨¼)</h1>
    
    
    

    <ul>
        
            
                
                    
                    <li>
                        <a href="/amaneblog/private/2025/10/01/amaneblog-welcome-private.html">
                            éå…¬é–‹ãƒ†ã‚¹ãƒˆè¨˜äº‹ - èªè¨¼ç¢ºèª
                        </a>
                        <small>(2025-10-01)</small>
                    </li>
                
            
        
            
                
            
        
            
                
                    
                    <li>
                        <a href="/amaneblog/private/2025/10/12/amaneblog-trigger-test.html">
                            ã‚³ãƒ¡ãƒ³ãƒˆãƒˆãƒªã‚¬ãƒ¼è¨˜äº‹ - ç‹¬ç™½
                        </a>
                        <small>(2025-10-12)</small>
                    </li>
                
            
        
            
                
                    
                        
    </ul>

    
        <p>â€»ã“ã®ãƒªã‚¹ãƒˆã¯èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
    
</div>



</div>

<script>
    // ğŸ”‘ ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚­ãƒ¼ã®å®šç¾©
    const LIST_FLAG_KEY = 'arg_flag_state'; 
    const LIST_CURRENT_STATE = localStorage.getItem(LIST_FLAG_KEY);
    const LIST_BASE_URL = "/amaneblog"; 
    
    // ğŸ”‘ éš ã—è¨˜äº‹ã®æƒ…å ±ã‚’å®šç¾© (Liquidå¤‰æ•°ã¨ã¯ç•°ãªã‚‹JSå¤‰æ•°ã¨ã—ã¦å®šç¾©)
    const HIDDEN_POST_URL = LIST_BASE_URL + '/private/2025/10/13/system-response-log.html';
    const HIDDEN_POST_TITLE = "[ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°] è¨˜éŒ²å‡¦ç†çµæœã®å ±å‘Š";
    const HIDDEN_POST_DATE = "2025/10/13"; 

    function checkAndDisplayHiddenPost() {
        // ğŸ”‘ ä¿®æ­£ã®æ ¸: çŠ¶æ…‹ãŒ COMPLETED ã®å ´åˆã®ã¿ã€å‡¦ç†ã‚’å®Ÿè¡Œ
        if (LIST_CURRENT_STATE === 'COMPLETED') { 
            
            // æ—¢å­˜ã®ãƒªã‚¹ãƒˆï¼ˆ<ul>ï¼‰è¦ç´ ã‚’è¦‹ã¤ã‘ã‚‹
            // LiquidãŒç”Ÿæˆã—ãŸãƒªã‚¹ãƒˆã®è¦ªè¦ç´ ï¼ˆ.posts-listï¼‰å†…ã® <ul> ã‚¿ã‚°ã‚’æ¢ã™
            let targetList = document.querySelector('.posts-list ul');
            
            if (!targetList) {
                // æŒ¿å…¥å¯¾è±¡ã®ãƒªã‚¹ãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã‘ã‚Œã°å‡¦ç†ã‚’çµ‚äº†
                console.error("Target list (<ul>) not found for dynamic insertion.");
                return;
            }

            // ğŸ”‘ æŒ¿å…¥ã™ã‚‹HTMLã‚’ã“ã®ãƒ–ãƒ­ãƒƒã‚¯å†…ã§ç”Ÿæˆ
            const hiddenPostHtml = `
                <li style="list-style: none; margin-bottom: 10px;">
                    <a href="${HIDDEN_POST_URL}" style="display: block; border: 2px solid green; padding: 10px; text-decoration: none; color: black; background-color: #f9fff9;">
                        <h3 style="margin-top: 0; margin-bottom: 5px; font-size: 1.1em; color: #1a5;">
                            ${HIDDEN_POST_TITLE}
                            <span style="font-size: 0.7em; margin-left: 10px; padding: 2px 6px; background: green; color: white; border-radius: 3px;">NEW LOG</span>
                        </h3>
                        <small style="color: #666;">()</small>
                    </a>
                </li>
            `;
            
            // æ—¢å­˜ãƒªã‚¹ãƒˆã®å…ˆé ­ã«æŒ¿å…¥
            targetList.insertAdjacentHTML('afterbegin', hiddenPostHtml);
        }
        // COMPLETED ã§ãªã‘ã‚Œã°ã€ä½•ã‚‚è¡¨ç¤ºã—ãªã„ï¼ˆLiquidã«ã‚ˆã£ã¦å…ƒã€…éš ã•ã‚Œã¦ã„ã‚‹ãŸã‚ï¼‰
    }

    // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«å®Ÿè¡Œ
    document.addEventListener('DOMContentLoaded', checkAndDisplayHiddenPost);
</script>
    </div>

    <footer>
        <p>&copy; 2025 ã‚¢ãƒãƒã®è¨˜éŒ²</p>
    </footer>

    <script>
        // ğŸ”‘ ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°å®šç¾©: Liquidå¤‰æ•°ã®å®‰å…¨ãªå‚ç…§
        const BASE_URL = "/amaneblog"; 
        const PRIVATE_PATH = BASE_URL + "/private/";
        
        // 2æ®µéšãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å–å¾— (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§å®‰å…¨åŒ–)
        const CORRECT_PASSWORD_1 = "AMANE-SECRET-KEY";
        const CORRECT_PASSWORD_2 = "CLOUD-HIDDEN-WORD"; 


        // 1. ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼IDã®ç”Ÿæˆã¨æ°¸ç¶šåŒ– (ã‚³ãƒ¡ãƒ³ãƒˆãƒˆãƒªã‚¬ãƒ¼ç”¨)
        function getPlayerId() {
            let playerId = localStorage.getItem('arg_player_id');
            if (!playerId) {
                playerId = 'player-' + Math.random().toString(36).substring(2, 9);
                localStorage.setItem('arg_player_id', playerId);
            }
            return playerId;
        }

        getPlayerId(); 


        // 2. æ±ç”¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼ãƒ­ã‚¸ãƒƒã‚¯ (2æ®µéšèªè¨¼)
        function authenticate() {
            // ãƒ•ã‚©ãƒ¼ãƒ ã®HTMLã‚’å®šç¾©
            const formHtml = `
                <div id="auth-overlay" style="
                    position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                    background: rgba(0, 0, 0, 0.9); z-index: 10000; 
                    display: flex; 
                    justify-content: center; align-items: center; 
                    flex-direction: column; color: white;
                ">
                    <h2>ã€äºŒé‡èªè¨¼ãŒå¿…è¦ã§ã™ã€‘</h2>
                    <p>éå…¬é–‹ã‚¨ãƒªã‚¢ã¸å…¥ã‚‹ãŸã‚ã® **åˆè¨€è‘‰** ã¨ **ç§˜å¯†ã®æ•°å­—** ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>
                    <form id="password-form" onsubmit="handleAuthSubmit(event)">
                        <input type="text" id="auth-input-1" placeholder="åˆè¨€è‘‰ (ä¾‹: AMANE-SECRET-KEY)" style="padding: 8px; margin: 5px; width: 250px;">
                        <input type="text" id="auth-input-2" placeholder="ç§˜å¯†ã®æ•°å­— (ä¾‹: CLOUD-HIDDEN-WORD)" style="padding: 8px; margin: 5px; width: 250px;">
                        <button type="submit" style="padding: 8px 15px; margin-top: 10px;">èªè¨¼ã‚’è©¦ã¿ã‚‹</button>
                    </form>
                    <p style="margin-top: 20px;"><a href="${BASE_URL}/" style="color: #ccc;">[ ãƒ–ãƒ­ã‚°å…¥å£ã«æˆ»ã‚‹ ]</a></p>
                    <p id="error-message" style="color: red; margin-top: 10px; display: none;">åˆè¨€è‘‰ã¾ãŸã¯ç§˜å¯†ã®æ•°å­—ãŒé•ã„ã¾ã™ã€‚</p>
                </div>
            `;

            // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ body ã®å…ˆé ­ã«æŒ¿å…¥ (afterbegin)
            document.body.insertAdjacentHTML('afterbegin', formHtml);
            
            // ã‚¨ãƒ©ãƒ¼ã‚’å›é¿ã™ã‚‹ãŸã‚ã€è¦ç´ ãŒå­˜åœ¨ã™ã‚‹å ´åˆã«ã®ã¿ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’è©¦ã¿ã¾ã™
            const input1 = document.getElementById('auth-input-1');
            if (input1) {
                 input1.focus(); 
            }
        }

        // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ã®å‡¦ç†
        function handleAuthSubmit(event) {
            event.preventDefault(); 
            
            const input1 = document.getElementById('auth-input-1').value.trim();
            const input2 = document.getElementById('auth-input-2').value.trim();
            const errorMessage = document.getElementById('error-message');

            if (input1 === CORRECT_PASSWORD_1 && input2 === CORRECT_PASSWORD_2) {
                // èªè¨¼æˆåŠŸ
                localStorage.setItem('isAuthenticated', 'true');
                const overlay = document.getElementById('auth-overlay');
                if (overlay) { overlay.remove(); }
                
                window.location.href = window.location.href; 
            } else {
                // èªè¨¼å¤±æ•—
                errorMessage.style.display = 'block';
                document.getElementById('auth-input-1').value = ''; 
                document.getElementById('auth-input-2').value = ''; 
                document.getElementById('auth-input-1').focus();
            }
        }

        // 3. ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®å®Ÿè¡Œ
        function checkPrivateAccess() {
            const currentPath = window.location.pathname;
            
            // ğŸ”‘ ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•° PRIVATE_PATH ã‚’ä½¿ç”¨
            const isPrivateArea = currentPath.startsWith(PRIVATE_PATH); 
            const isAuthenticated = localStorage.getItem('isAuthenticated') === 'true';

            // éå…¬é–‹ã‚¨ãƒªã‚¢ã‹ã¤æœªèªè¨¼ã®å ´åˆ
            if (isPrivateArea && !isAuthenticated) {
                
                authenticate(); // ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¡¨ç¤º

                // ä¿®æ­£æ¸ˆã¿: bodyã®æ§‹æˆè¦ç´ ã‚’å€‹åˆ¥ã«éè¡¨ç¤ºã«ã™ã‚‹
                document.body.style.display = 'block'; 
                
                const elementsToHide = ['header', '.container', 'footer'];
                elementsToHide.forEach(selector => {
                    const element = document.querySelector(selector);
                    if (element) {
                        element.style.display = 'none';
                    }
                });
                
            } else {
                // èªè¨¼æ¸ˆã¿ã¾ãŸã¯å…¬é–‹ã‚¨ãƒªã‚¢ã®å ´åˆ
                document.body.style.display = 'block'; 
            }
        }

        // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«å®Ÿè¡Œ
        checkPrivateAccess();

    </script>

</body>
</html>